import{l as _,h as C,d as h,a9 as y,m as A,a as l,i as B,I as w,at as v,K as L,t as T,A as S,r as x,Y as P,u as k,q as p,o as D,aT as R}from"./index-C16mqE5q.js";import{T as $}from"./index-Bylzh2DP.js";import{C as E}from"./index-DPO2I8vn.js";import"./index-BKfVz-lo.js";import{B as q}from"./index-CQP7MYDJ.js";import{a as z,R as G}from"./index-BH5FRvRl.js";import{s as N,C as j}from"./index-BhfPE-Je.js";import"./index-ktq7YPLE.js";import{a as K,s as O}from"./request-CN--Px75.js";import"./use-expose-BNuXcEgj.js";import"./use-scope-id-DEtSSiSh.js";const U=_(N),[Y,m]=C("address-item");var F=h({name:Y,props:{address:y(Object),disabled:Boolean,switchable:Boolean,singleChoice:Boolean,defaultTagText:String,rightIcon:A("edit")},emits:["edit","click","select"],setup(t,{slots:d,emit:s}){const i=e=>{t.switchable&&s("select"),s("click",e)},f=()=>l(w,{name:t.rightIcon,class:m("edit"),onClick:e=>{e.stopPropagation(),s("edit"),s("click",e)}},null),c=()=>{if(d.tag)return d.tag(t.address);if(t.address.isDefault&&t.defaultTagText)return l($,{type:"primary",round:!0,class:m("tag")},{default:()=>[t.defaultTagText]})},u=()=>{const{address:e,disabled:a,switchable:n,singleChoice:o}=t,r=[l("div",{class:m("name")},[`${e.name} ${e.tel}`,c()]),l("div",{class:m("address")},[e.address])];return n&&!a?o?l(z,{name:e.id,iconSize:18},{default:()=>[r]}):l(j,{name:e.id,iconSize:18},{default:()=>[r]}):r};return()=>{var e;const{disabled:a}=t;return l("div",{class:m({disabled:a}),onClick:i},[l(E,{border:!1,titleClass:m("title")},{title:u,"right-icon":f}),(e=d.bottom)==null?void 0:e.call(d,B({},t.address,{disabled:a}))])}}});const[H,b,J]=C("address-list"),M={list:v(),modelValue:[...L,Array],switchable:T,disabledText:String,disabledList:v(),showAddButton:T,addButtonText:String,defaultTagText:String,rightIcon:A("edit")};var Q=h({name:H,props:M,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(t,{slots:d,emit:s}){const i=S(()=>!Array.isArray(t.modelValue)),f=(e,a,n)=>{const o=()=>s(n?"editDisabled":"edit",e,a),r=g=>s("clickItem",e,a,{event:g}),V=()=>{if(s(n?"selectDisabled":"select",e,a),!n)if(i.value)s("update:modelValue",e.id);else{const g=t.modelValue;g.includes(e.id)?s("update:modelValue",g.filter(I=>I!==e.id)):s("update:modelValue",[...g,e.id])}};return l(F,{key:e.id,address:e,disabled:n,switchable:t.switchable,singleChoice:i.value,defaultTagText:t.defaultTagText,rightIcon:t.rightIcon,onEdit:o,onClick:r,onSelect:V},{bottom:d["item-bottom"],tag:d.tag})},c=(e,a)=>{if(e)return e.map((n,o)=>f(n,o,a))},u=()=>t.showAddButton?l("div",{class:[b("bottom"),"van-safe-area-bottom"]},[l(q,{round:!0,block:!0,type:"primary",text:t.addButtonText||J("add"),class:b("add"),onClick:()=>s("add")},null)]):void 0;return()=>{var e,a;const n=c(t.list),o=c(t.disabledList,!0),r=t.disabledText&&l("div",{class:b("disabled-text")},[t.disabledText]);return l("div",{class:b()},[(e=d.top)==null?void 0:e.call(d),!i.value&&Array.isArray(t.modelValue)?l(U,{modelValue:t.modelValue},{default:()=>[n]}):l(G,{modelValue:t.modelValue},{default:()=>[n]}),r,o,(a=d.default)==null?void 0:a.call(d),u()])}}});const W=_(Q);function X(){return K({url:"/address/list",method:"get"})}const Z=h({name:"AddressPage",__name:"index",setup(t){const d=x(""),s=x([]);async function i(){const u=O({message:"加载中...",duration:0});try{const{code:e,data:a}=await X();e===200&&(s.value=a,d.value=a[0].id)}finally{u.close()}}i();function f(){}function c(){}return(u,e)=>{const a=W;return D(),P(a,{modelValue:k(d),"onUpdate:modelValue":e[0]||(e[0]=n=>p(d)?d.value=n:null),list:k(s),"default-tag-text":"默认",onAdd:f,onEdit:c},null,8,["modelValue","list"])}}}),ue=R(Z,[["__scopeId","data-v-ee9c425b"]]);export{ue as default};
