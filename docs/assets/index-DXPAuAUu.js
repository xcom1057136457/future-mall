import{l as A,h as _,d as h,Z as p,m as C,a as o,i as B,I as w,a3 as v,K as I,t as T,A as L,r as x,Y as S,u as k,q as P,f as D,o as R,aH as $}from"./index-NqS3evgO.js";import{T as E}from"./index-Dx7NRumu.js";import{C as q}from"./index-CAe_UIfi.js";import"./index-TXPf4dty.js";import{B as z}from"./index-DF4KEBhs.js";import{a as G,R as N}from"./index-B03NN0ma.js";import{s as j,C as H}from"./index-C1QaQHgT.js";import"./index-DJ5EJ3yW.js";import{g as K}from"./address-D0ZBA5Vg.js";import"./index-Cp4cOlF2.js";import{s as O}from"./request-BZVuECNf.js";import"./use-expose-PVMTY6tw.js";import"./use-scope-id-TRPw9BWN.js";const U=A(j),[Y,u]=_("address-item");var Z=h({name:Y,props:{address:p(Object),disabled:Boolean,switchable:Boolean,singleChoice:Boolean,defaultTagText:String,rightIcon:C("edit")},emits:["edit","click","select"],setup(a,{slots:i,emit:d}){const l=e=>{a.switchable&&d("select"),d("click",e)},m=()=>o(w,{name:a.rightIcon,class:u("edit"),onClick:e=>{e.stopPropagation(),d("edit"),d("click",e)}},null),c=()=>{if(i.tag)return i.tag(a.address);if(a.address.isDefault&&a.defaultTagText)return o(E,{type:"primary",round:!0,class:u("tag")},{default:()=>[a.defaultTagText]})},f=()=>{const{address:e,disabled:t,switchable:s,singleChoice:n}=a,r=[o("div",{class:u("name")},[`${e.name} ${e.tel}`,c()]),o("div",{class:u("address")},[e.address])];return s&&!t?n?o(G,{name:e.id,iconSize:18},{default:()=>[r]}):o(H,{name:e.id,iconSize:18},{default:()=>[r]}):r};return()=>{var e;const{disabled:t}=a;return o("div",{class:u({disabled:t}),onClick:l},[o(q,{border:!1,titleClass:u("title")},{title:f,"right-icon":m}),(e=i.bottom)==null?void 0:e.call(i,B({},a.address,{disabled:t}))])}}});const[F,b,J]=_("address-list"),M={list:v(),modelValue:[...I,Array],switchable:T,disabledText:String,disabledList:v(),showAddButton:T,addButtonText:String,defaultTagText:String,rightIcon:C("edit")};var Q=h({name:F,props:M,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(a,{slots:i,emit:d}){const l=L(()=>!Array.isArray(a.modelValue)),m=(e,t,s)=>{const n=()=>d(s?"editDisabled":"edit",e,t),r=g=>d("clickItem",e,t,{event:g}),y=()=>{if(d(s?"selectDisabled":"select",e,t),!s)if(l.value)d("update:modelValue",e.id);else{const g=a.modelValue;g.includes(e.id)?d("update:modelValue",g.filter(V=>V!==e.id)):d("update:modelValue",[...g,e.id])}};return o(Z,{key:e.id,address:e,disabled:s,switchable:a.switchable,singleChoice:l.value,defaultTagText:a.defaultTagText,rightIcon:a.rightIcon,onEdit:n,onClick:r,onSelect:y},{bottom:i["item-bottom"],tag:i.tag})},c=(e,t)=>{if(e)return e.map((s,n)=>m(s,n,t))},f=()=>a.showAddButton?o("div",{class:[b("bottom"),"van-safe-area-bottom"]},[o(z,{round:!0,block:!0,type:"primary",text:a.addButtonText||J("add"),class:b("add"),onClick:()=>d("add")},null)]):void 0;return()=>{var e,t;const s=c(a.list),n=c(a.disabledList,!0),r=a.disabledText&&o("div",{class:b("disabled-text")},[a.disabledText]);return o("div",{class:b()},[(e=i.top)==null?void 0:e.call(i),!l.value&&Array.isArray(a.modelValue)?o(U,{modelValue:a.modelValue},{default:()=>[s]}):o(N,{modelValue:a.modelValue},{default:()=>[s]}),r,n,(t=i.default)==null?void 0:t.call(i),f()])}}});const W=A(Q),X=h({name:"AddressPage",__name:"index",setup(a){const i=D(),d=x(""),l=x([]);async function m(){const e=O({message:"加载中...",duration:0});try{const{code:t,data:s}=await K();t===200&&(l.value=s,d.value=s[0].id)}finally{e.close()}}m();function c(){i.push({name:"AddressAdd",params:{type:"add"}})}function f(e){i.push({name:"AddressAdd",params:{type:"edit",id:e==null?void 0:e.id}})}return(e,t)=>{const s=W;return R(),S(s,{modelValue:k(d),"onUpdate:modelValue":t[0]||(t[0]=n=>P(d)?d.value=n:null),list:k(l),"default-tag-text":"默认",onAdd:c,onEdit:f},null,8,["modelValue","list"])}}}),fe=$(X,[["__scopeId","data-v-5e81e0af"]]);export{fe as default};
