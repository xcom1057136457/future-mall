import{h as R,d as j,r as O,aK as te,D as oe,t as A,a as r,l as F,i as k,ai as ne,aL as se,V as ae,A as M,K as ie,aj as le,m as ce,U as re,aM as de,j as J,p as ue,ac as me,aN as q,aD as fe,aO as _e,aP as he,af as xe,a1 as be,c as ve,b as e,y as d,u as i,w as ge,q as pe,F as ye,f as Be,x as we,o as ke}from"./index-C16mqE5q.js";import{S as Ce}from"./index-CNXlCPvO.js";import{c as Pe,p as Se,P as Te,m as De,b as Oe,a as Q,s as W,e as je}from"./request-CN--Px75.js";import"./index-BKfVz-lo.js";import{B as N}from"./index-CQP7MYDJ.js";import{u as Ae}from"./use-expose-BNuXcEgj.js";import"./use-scope-id-DEtSSiSh.js";const[X,Y]=R("action-bar"),Z=Symbol(X),Ne={placeholder:Boolean,safeAreaInsetBottom:A};var Ee=j({name:X,props:Ne,setup(t,{slots:l}){const s=O(),o=te(s,Y),{linkChildren:u}=oe(Z);u();const x=()=>{var m;return r("div",{ref:s,class:[Y(),{"van-safe-area-bottom":t.safeAreaInsetBottom}]},[(m=l.default)==null?void 0:m.call(l)])};return()=>t.placeholder?o(x):x()}});const Re=F(Ee),[Fe,Ie]=R("action-bar-button"),Ke=k({},ne,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var $e=j({name:Fe,props:Ke,setup(t,{slots:l}){const s=se(),{parent:o,index:u}=ae(Z),x=M(()=>{if(o){const a=o.children[u.value-1];return!(a&&"isButton"in a)}}),m=M(()=>{if(o){const a=o.children[u.value+1];return!(a&&"isButton"in a)}});return Ae({isButton:!0}),()=>{const{type:a,icon:b,text:v,color:p,loading:y,disabled:B}=t;return r(N,{class:Ie([a,{last:m.value,first:x.value}]),size:"large",type:a,icon:b,color:p,loading:y,disabled:B,onClick:s},{default:()=>[l.default?l.default():v]})}}});const G=F($e),[He,h,D]=R("dialog"),Le=k({},Pe,{title:String,theme:String,width:ie,message:[String,Function],callback:Function,allowHtml:Boolean,className:le,transition:ce("van-dialog-bounce"),messageAlign:String,closeOnPopstate:A,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:A,closeOnClickOverlay:Boolean}),Ue=[...Se,"transition","closeOnPopstate"];var ee=j({name:He,props:Le,emits:["confirm","cancel","keydown","update:show"],setup(t,{emit:l,slots:s}){const o=O(),u=re({confirm:!1,cancel:!1}),x=n=>l("update:show",n),m=n=>{var c;x(!1),(c=t.callback)==null||c.call(t,n)},a=n=>()=>{t.show&&(l(n),t.beforeClose?(u[n]=!0,xe(t.beforeClose,{args:[n],done(){m(n),u[n]=!1},canceled(){u[n]=!1}})):m(n))},b=a("cancel"),v=a("confirm"),p=de(n=>{var c,f;if(n.target!==((f=(c=o.value)==null?void 0:c.popupRef)==null?void 0:f.value))return;({Enter:t.showConfirmButton?v:q,Escape:t.showCancelButton?b:q})[n.key](),l("keydown",n)},["enter","esc"]),y=()=>{const n=s.title?s.title():t.title;if(n)return r("div",{class:h("header",{isolated:!t.message&&!s.default})},[n])},B=n=>{const{message:c,allowHtml:f,messageAlign:_}=t,g=h("message",{"has-title":n,[_]:_}),w=fe(c)?c():c;return f&&typeof w=="string"?r("div",{class:g,innerHTML:w},null):r("div",{class:g},[w])},C=()=>{if(s.default)return r("div",{class:h("content")},[s.default()]);const{title:n,message:c,allowHtml:f}=t;if(c){const _=!!(n||s.title);return r("div",{key:f?1:0,class:h("content",{isolated:!_})},[B(_)])}},P=()=>r("div",{class:[he,h("footer")]},[t.showCancelButton&&r(N,{size:"large",text:t.cancelButtonText||D("cancel"),class:h("cancel"),style:{color:t.cancelButtonColor},loading:u.cancel,disabled:t.cancelButtonDisabled,onClick:b},null),t.showConfirmButton&&r(N,{size:"large",text:t.confirmButtonText||D("confirm"),class:[h("confirm"),{[_e]:t.showCancelButton}],style:{color:t.confirmButtonColor},loading:u.confirm,disabled:t.confirmButtonDisabled,onClick:v},null)]),S=()=>r(Re,{class:h("footer")},{default:()=>[t.showCancelButton&&r(G,{type:"warning",text:t.cancelButtonText||D("cancel"),class:h("cancel"),color:t.cancelButtonColor,loading:u.cancel,disabled:t.cancelButtonDisabled,onClick:b},null),t.showConfirmButton&&r(G,{type:"danger",text:t.confirmButtonText||D("confirm"),class:h("confirm"),color:t.confirmButtonColor,loading:u.confirm,disabled:t.confirmButtonDisabled,onClick:v},null)]}),T=()=>s.footer?s.footer():t.theme==="round-button"?S():P();return()=>{const{width:n,title:c,theme:f,message:_,className:g}=t;return r(Te,J({ref:o,role:"dialog",class:[h([f]),g],style:{width:me(n)},tabindex:0,"aria-labelledby":c||_,onKeydown:p,"onUpdate:show":x},ue(t,Ue)),{default:()=>[y(),C(),T()]})}}});let E;const Ve={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let ze=k({},Ve);function Me(){({instance:E}=De({setup(){const{state:l,toggle:s}=Oe();return()=>r(ee,J(l,{"onUpdate:show":s}),null)}}))}function qe(t){return be?new Promise((l,s)=>{E||Me(),E.open(k({},ze,t,{callback:o=>{(o==="confirm"?l:s)(o)}}))}):Promise.resolve(void 0)}const We=t=>qe(k({showCancelButton:!0},t));F(ee);function Ye(){return Q({url:"/order/detail",method:"get"})}function Ge(){return Q({url:"/order/delete",method:"delete"})}const Je={"mb-64px":"","p-2":"","space-y-2":""},Qe=e("div",{"rounded-lg":"","bg-green-6":"","py-3":"","text-white":""},[e("div",{"mb-3":"",flex:"","items-center":"","justify-center":"","gap-x-2":""},[e("div",{"i-solar-wallet-money-bold-duotone":"","text-24px":""}),e("div",{"text-base":""}," 订单已支付 ")]),e("div",{text:"sm center white/80"}," 感谢您的支持 ")],-1),Xe={flex:"","items-center":"","gap-x-3":"","rounded-lg":"","bg-white":"","p-3":""},Ze=e("div",{"i-solar-map-point-wave-bold-duotone":"","text-lg":""},null,-1),et={text:"sm black/80","mb-1":""},tt={"space-x-5":"",text:"sm black/80"},ot={flex:"","items-end":"","justify-between":"","rounded-lg":"","bg-white":"","p-3":""},nt={flex:"","gap-x-2":""},st={"h-90px":"","w-90px":"",border:"~ solid gray-100","rounded-lg":"",alt:""},at={flex:"~ col","justify-between":""},it={text:"base black/80","font-semibold":""},lt={text:"xs black/60"},ct={"text-red":""},rt=e("span",{"text-xs":""},"￥",-1),dt={"text-lg":""},ut={"rounded-lg":"","bg-white":"","p-3":"","space-y-3":""},mt={flex:"","items-center":"","justify-between":""},ft=e("div",{text:"sm black/80"}," 订单编号 ",-1),_t={flex:"","items-center":"","gap-x-2":""},ht={text:"14px black/40"},xt=e("div",{text:"xs black/70",p:"x-3 y-1","rounded-full":"","bg-gray-100":""}," 复制 ",-1),bt={flex:"","items-center":"","justify-between":""},vt=e("div",{text:"sm black/80"}," 下单时间 ",-1),gt={text:"14px black/40"},pt={flex:"","items-center":"","justify-between":""},yt=e("div",{text:"sm black/80"}," 取消时间 ",-1),Bt={text:"14px black/40"},wt={flex:"","items-center":"","justify-between":""},kt=e("div",{text:"sm black/80"}," 支付方式 ",-1),Ct={text:"14px black/40"},Pt={flex:"","items-center":"","justify-between":""},St=e("div",{text:"sm black/80"}," 支付编号 ",-1),Tt={text:"14px black/40"},Dt={"rounded-lg":"","bg-white":"","p-3":"","space-y-3":""},Ot={flex:"","items-center":"","justify-between":""},jt=e("div",{text:"sm black/80"}," 产品总计 ",-1),At={text:"14px black/40"},Nt={flex:"","items-center":"","justify-between":""},Et=e("div",{text:"sm black/80"}," 运费 ",-1),Rt={text:"14px black/40"},Ft={flex:"","items-center":"","justify-between":""},It=e("div",{text:"sm black/80"}," 优惠 ",-1),Kt={text:"14px black/40"},$t={flex:"","items-center":"","justify-between":""},Ht=e("div",{text:"sm black/80"}," 需付款 ",-1),Lt={text:"14px black/40"},Ut={p:"x-4 y-2",fixed:"","bottom-0":"","left-0":"","right-0":"",flex:"","items-center":"","justify-between":"","bg-white":""},Vt=e("div",{"i-solar-home-2-broken":"","mb-1":"","text-lg":""},null,-1),zt=e("div",{"text-xs":""}," 首页 ",-1),Mt=[Vt,zt],Zt=j({name:"OrderDetail",__name:"detail",setup(t){const l=Be(),s=O(1),o=O({});async function u(){const m=W({message:"加载中...",forbidClick:!0,duration:0});try{const{code:a,data:b}=await Ye();a===200&&(o.value=b)}finally{m.close()}}u();async function x(){We({title:"系统通知",message:"是否删除该订单?"}).then(async()=>{const m=W({message:"删除中...",forbidClick:!0,duration:0});try{const{code:a}=await Ge();a===200&&(je({message:"删除成功!"}),setTimeout(()=>{l.replace("/")},300))}finally{m.close()}}).catch(()=>{})}return(m,a)=>{var p,y,B,C,P,S,T,n,c,f,_,g,w,I,K,$,H,L,U,V;const b=Ce,v=we("lazy");return ke(),ve(ye,null,[e("div",Je,[Qe,e("div",Xe,[Ze,e("div",null,[e("div",et,d((p=i(o))==null?void 0:p.city),1),e("div",tt,[e("span",null,d((y=i(o))==null?void 0:y.name),1),e("span",null,d((B=i(o))==null?void 0:B.phone),1)])])]),e("div",ot,[e("div",nt,[ge(e("img",st,null,512),[[v,(P=(C=i(o))==null?void 0:C.commodity)==null?void 0:P.image]]),e("div",at,[e("div",it,d((T=(S=i(o))==null?void 0:S.commodity)==null?void 0:T.name),1),e("div",lt,d((c=(n=i(o))==null?void 0:n.commodity)==null?void 0:c.parameter),1),e("div",ct,[rt,e("span",dt,d((_=(f=i(o))==null?void 0:f.commodity)==null?void 0:_.price),1)])])]),e("div",null,[r(b,{modelValue:i(s),"onUpdate:modelValue":a[0]||(a[0]=z=>pe(s)?s.value=z:null),disabled:""},null,8,["modelValue"])])]),e("div",ut,[e("div",mt,[ft,e("div",_t,[e("span",ht,d((g=i(o))==null?void 0:g.orderNumber),1),xt])]),e("div",bt,[vt,e("div",gt,d((w=i(o))==null?void 0:w.orderTime),1)]),e("div",pt,[yt,e("div",Bt,d((I=i(o))==null?void 0:I.cancelTime),1)]),e("div",wt,[kt,e("div",Ct,d((K=i(o))==null?void 0:K.paymentMethod),1)]),e("div",Pt,[St,e("div",Tt,d(($=i(o))==null?void 0:$.paymentNumber),1)])]),e("div",Dt,[e("div",Ot,[jt,e("div",At," ￥"+d((H=i(o))==null?void 0:H.totalProducts),1)]),e("div",Nt,[Et,e("div",Rt," ￥"+d((L=i(o))==null?void 0:L.freight),1)]),e("div",Ft,[It,e("div",Kt," ￥"+d((U=i(o))==null?void 0:U.discount),1)]),e("div",$t,[Ht,e("div",Lt," ￥"+d((V=i(o))==null?void 0:V.paymentRequired),1)])])]),e("div",Ut,[e("div",{flex:"~ col","items-center":"",text:"black/60",onClick:a[1]||(a[1]=z=>i(l).push("/"))},Mt),e("div",{text:"xs red",border:"~ solid red","rounded-full":"",p:"x-3 y-1",onClick:x}," 删除订单 ")])],64)}}});export{Zt as default};
