import{ak as Me,h as de,d as fe,r as j,U as xe,D as De,A as I,J as U,a6 as Oe,a7 as We,aC as Fe,H as ge,aa as je,ab as Ne,a2 as He,a3 as Ve,G as $e,a as f,t as J,K as R,a8 as se,O as ke,M as F,ao as oe,k as ce,aw as we,l as ve,V as ze,R as Ye,S as qe,aD as Ke,aE as Ue,aF as Xe,m as G,i as Je,aj as Ge,aG as Qe,ac as Q,ap as Ze,aH as pe,E as K,aI as Te,aJ as et,I as ue,j as Ie,g as tt,aK as at,a1 as nt,w as it,x as lt}from"./index-eyiAbzCP.js";import{u as ot,a as Ae}from"./request-tQU21M3o.js";import{u as Ce}from"./use-expose-DsxqQLPw.js";import{c as rt,C as st}from"./index-7BGpXOOE.js";let ct=0;function ut(){const e=Me(),{name:o="unknown"}=(e==null?void 0:e.type)||{};return`${o}-${++ct}`}const[Re,re]=de("swipe"),dt={loop:J,width:R,height:R,vertical:Boolean,autoplay:se(0),duration:se(500),touchable:J,lazyRender:Boolean,initialSwipe:se(0),indicatorColor:String,showIndicators:J,stopPropagation:J},Be=Symbol(Re);var ft=fe({name:Re,props:dt,emits:["change","dragStart","dragEnd"],setup(e,{emit:o,slots:r}){const d=j(),i=j(),a=xe({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let C=!1;const w=ot(),{children:g,linkChildren:v}=De(Be),n=I(()=>g.length),y=I(()=>a[e.vertical?"height":"width"]),x=I(()=>e.vertical?w.deltaY.value:w.deltaX.value),L=I(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-y.value*n.value:0),B=I(()=>y.value?Math.ceil(Math.abs(L.value)/y.value):n.value),M=I(()=>n.value*y.value),s=I(()=>(a.active+n.value)%n.value),$=I(()=>{const l=e.vertical?"vertical":"horizontal";return w.direction.value===l}),_=I(()=>{const l={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+a.offset.toFixed(2)}px)`};if(y.value){const b=e.vertical?"height":"width",h=e.vertical?"width":"height";l[b]=`${M.value}px`,l[h]=e[h]?`${e[h]}px`:""}return l}),he=l=>{const{active:b}=a;return l?e.loop?we(b+l,-1,n.value):we(b+l,0,B.value):b},N=(l,b=0)=>{let h=l*y.value;e.loop||(h=Math.min(h,-L.value));let k=b-h;return e.loop||(k=we(k,L.value,0)),k},z=({pace:l=0,offset:b=0,emitChange:h})=>{if(n.value<=1)return;const{active:k}=a,E=he(l),q=N(E,b);if(e.loop){if(g[0]&&q!==L.value){const t=q<L.value;g[0].setOffset(t?M.value:0)}if(g[n.value-1]&&q!==0){const t=q>0;g[n.value-1].setOffset(t?-M.value:0)}}a.active=E,a.offset=q,h&&E!==k&&o("change",s.value)},D=()=>{a.swiping=!0,a.active<=-1?z({pace:n.value}):a.active>=n.value&&z({pace:-n.value})},Z=()=>{D(),w.reset(),oe(()=>{a.swiping=!1,z({pace:-1,emitChange:!0})})},H=()=>{D(),w.reset(),oe(()=>{a.swiping=!1,z({pace:1,emitChange:!0})})};let p;const Y=()=>clearTimeout(p),O=()=>{Y(),+e.autoplay>0&&n.value>1&&(p=setTimeout(()=>{H(),O()},+e.autoplay))},W=(l=+e.initialSwipe)=>{if(!d.value)return;const b=()=>{var h,k;if(!ke(d)){const E={width:d.value.offsetWidth,height:d.value.offsetHeight};a.rect=E,a.width=+((h=e.width)!=null?h:E.width),a.height=+((k=e.height)!=null?k:E.height)}n.value&&(l=Math.min(n.value-1,l),l===-1&&(l=n.value-1)),a.active=l,a.swiping=!0,a.offset=N(l),g.forEach(E=>{E.setOffset(0)}),O()};ke(d)?F().then(b):b()},ee=()=>W(a.active);let te;const ae=l=>{!e.touchable||l.touches.length>1||(w.start(l),C=!1,te=Date.now(),Y(),D())},me=l=>{e.touchable&&a.swiping&&(w.move(l),$.value&&(!e.loop&&(a.active===0&&x.value>0||a.active===n.value-1&&x.value<0)||(ce(l,e.stopPropagation),z({offset:x.value}),C||(o("dragStart",{index:s.value}),C=!0))))},ne=()=>{if(!e.touchable||!a.swiping)return;const l=Date.now()-te,b=x.value/l;if((Math.abs(b)>.25||Math.abs(x.value)>y.value/2)&&$.value){const k=e.vertical?w.offsetY.value:w.offsetX.value;let E=0;e.loop?E=k>0?x.value>0?-1:1:0:E=-Math[x.value>0?"ceil":"floor"](x.value/y.value),z({pace:E,emitChange:!0})}else x.value&&z({pace:0});C=!1,a.swiping=!1,o("dragEnd",{index:s.value}),O()},ie=(l,b={})=>{D(),w.reset(),oe(()=>{let h;e.loop&&l===n.value?h=a.active===0?0:l:h=l%n.value,b.immediate?oe(()=>{a.swiping=!1}):a.swiping=!1,z({pace:h-a.active,emitChange:!0})})},be=(l,b)=>{const h=b===s.value,k=h?{backgroundColor:e.indicatorColor}:void 0;return f("i",{style:k,class:re("indicator",{active:h})},null)},ye=()=>{if(r.indicator)return r.indicator({active:s.value,total:n.value});if(e.showIndicators&&n.value>1)return f("div",{class:re("indicators",{vertical:e.vertical})},[Array(n.value).fill("").map(be)])};return Ce({prev:Z,next:H,state:a,resize:ee,swipeTo:ie}),v({size:y,props:e,count:n,activeIndicator:s}),U(()=>e.initialSwipe,l=>W(+l)),U(n,()=>W(a.active)),U(()=>e.autoplay,O),U([Oe,We,()=>e.width,()=>e.height],ee),U(Fe(),l=>{l==="visible"?O():Y()}),ge(W),je(()=>W(a.active)),Ne(()=>W(a.active)),He(Y),Ve(Y),$e("touchmove",me,{target:i}),()=>{var l;return f("div",{ref:d,class:re()},[f("div",{ref:i,style:_.value,class:re("track",{vertical:e.vertical}),onTouchstartPassive:ae,onTouchend:ne,onTouchcancel:ne},[(l=r.default)==null?void 0:l.call(r)]),ye()])}}});const zt=ve(ft),[gt,vt]=de("swipe-item");var ht=fe({name:gt,setup(e,{slots:o}){let r;const d=xe({offset:0,inited:!1,mounted:!1}),{parent:i,index:a}=ze(Be);if(!i)return;const C=I(()=>{const v={},{vertical:n}=i.props;return i.size.value&&(v[n?"height":"width"]=`${i.size.value}px`),d.offset&&(v.transform=`translate${n?"Y":"X"}(${d.offset}px)`),v}),w=I(()=>{const{loop:v,lazyRender:n}=i.props;if(!n||r)return!0;if(!d.mounted)return!1;const y=i.activeIndicator.value,x=i.count.value-1,L=y===0&&v?x:y-1,B=y===x&&v?0:y+1;return r=a.value===y||a.value===L||a.value===B,r}),g=v=>{d.offset=v};return ge(()=>{F(()=>{d.mounted=!0})}),Ce({setOffset:g}),()=>{var v;return f("div",{class:vt(),style:C.value},[w.value?(v=o.default)==null?void 0:v.call(o):null])}}});const At=ve(ht);function _e(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function mt(e,o){if(_e(e)){if(o.required)return!1;if(o.validateEmpty===!1)return!0}return!(o.pattern&&!o.pattern.test(String(e)))}function bt(e,o){return new Promise(r=>{const d=o.validator(e,o);if(Ke(d)){d.then(r);return}r(d)})}function Pe(e,o){const{message:r}=o;return Ue(r)?r(e,o):r||""}function yt({target:e}){e.composing=!0}function Le({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function wt(e,o){const r=Ye();e.style.height="auto";let d=e.scrollHeight;if(Xe(o)){const{maxHeight:i,minHeight:a}=o;i!==void 0&&(d=Math.min(d,i)),a!==void 0&&(d=Math.max(d,a))}d&&(e.style.height=`${d}px`,qe(r))}function St(e){return e==="number"?{type:"text",inputmode:"decimal"}:e==="digit"?{type:"tel",inputmode:"numeric"}:{type:e}}function A(e){return[...e].length}function Se(e,o){return[...e].slice(0,o).join("")}const[It,P]=de("field"),xt={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:R,formatter:Function,clearIcon:G("clear"),modelValue:se(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:G("focus"),formatTrigger:G("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null}},Ct=Je({},rt,xt,{rows:R,type:G("text"),rules:Array,autosize:[Boolean,Object],labelWidth:R,labelClass:Ge,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var Et=fe({name:It,props:Ct,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:o,slots:r}){const d=ut(),i=xe({status:"unvalidated",focused:!1,validateMessage:""}),a=j(),C=j(),w=j(),{parent:g}=ze(Qe),v=()=>{var t;return String((t=e.modelValue)!=null?t:"")},n=t=>{if(K(e[t]))return e[t];if(g&&K(g.props[t]))return g.props[t]},y=I(()=>{const t=n("readonly");if(e.clearable&&!t){const c=v()!=="",u=e.clearTrigger==="always"||e.clearTrigger==="focus"&&i.focused;return c&&u}return!1}),x=I(()=>w.value&&r.input?w.value():e.modelValue),L=I(()=>{var t;const c=n("required");return c==="auto"?(t=e.rules)==null?void 0:t.some(u=>u.required):c}),B=t=>t.reduce((c,u)=>c.then(()=>{if(i.status==="failed")return;let{value:m}=x;if(u.formatter&&(m=u.formatter(m,u)),!mt(m,u)){i.status="failed",i.validateMessage=Pe(m,u);return}if(u.validator)return _e(m)&&u.validateEmpty===!1?void 0:bt(m,u).then(S=>{S&&typeof S=="string"?(i.status="failed",i.validateMessage=S):S===!1&&(i.status="failed",i.validateMessage=Pe(m,u))})}),Promise.resolve()),M=()=>{i.status="unvalidated",i.validateMessage=""},s=()=>o("endValidate",{status:i.status,message:i.validateMessage}),$=(t=e.rules)=>new Promise(c=>{M(),t?(o("startValidate"),B(t).then(()=>{i.status==="failed"?(c({name:e.name,message:i.validateMessage}),s()):(i.status="passed",c(),s())})):c()}),_=t=>{if(g&&e.rules){const{validateTrigger:c}=g.props,u=Te(c).includes(t),m=e.rules.filter(S=>S.trigger?Te(S.trigger).includes(t):u);m.length&&$(m)}},he=t=>{var c;const{maxlength:u}=e;if(K(u)&&A(t)>+u){const m=v();if(m&&A(m)===+u)return m;const S=(c=a.value)==null?void 0:c.selectionEnd;if(i.focused&&S){const T=[...t],V=T.length-+u;return T.splice(S-V,V),T.join("")}return Se(t,+u)}return t},N=(t,c="onChange")=>{const u=t;t=he(t);const m=A(u)-A(t);if(e.type==="number"||e.type==="digit"){const T=e.type==="number";t=et(t,T,T)}let S=0;if(e.formatter&&c===e.formatTrigger){const{formatter:T,maxlength:V}=e;if(t=T(t),K(V)&&A(t)>+V&&(t=Se(t,+V)),a.value&&i.focused){const{selectionEnd:le}=a.value,Ee=Se(u,le);S=A(T(Ee))-A(Ee)}}if(a.value&&a.value.value!==t)if(i.focused){let{selectionStart:T,selectionEnd:V}=a.value;if(a.value.value=t,K(T)&&K(V)){const le=A(t);m?(T-=m,V-=m):S&&(T+=S,V+=S),a.value.setSelectionRange(Math.min(T,le),Math.min(V,le))}}else a.value.value=t;t!==e.modelValue&&o("update:modelValue",t)},z=t=>{t.target.composing||N(t.target.value)},D=()=>{var t;return(t=a.value)==null?void 0:t.blur()},Z=()=>{var t;return(t=a.value)==null?void 0:t.focus()},H=()=>{const t=a.value;e.type==="textarea"&&e.autosize&&t&&wt(t,e.autosize)},p=t=>{i.focused=!0,o("focus",t),F(H),n("readonly")&&D()},Y=t=>{i.focused=!1,N(v(),"onBlur"),o("blur",t),!n("readonly")&&(_("onBlur"),F(H),at())},O=t=>o("clickInput",t),W=t=>o("clickLeftIcon",t),ee=t=>o("clickRightIcon",t),te=t=>{ce(t),o("update:modelValue",""),o("clear",t)},ae=I(()=>{if(typeof e.error=="boolean")return e.error;if(g&&g.props.showError&&i.status==="failed")return!0}),me=I(()=>{const t=n("labelWidth"),c=n("labelAlign");if(t&&c!=="top")return{width:Q(t)}}),ne=t=>{t.keyCode===13&&(!(g&&g.props.submitOnEnter)&&e.type!=="textarea"&&ce(t),e.type==="search"&&D()),o("keypress",t)},ie=()=>e.id||`${d}-input`,be=()=>i.status,ye=()=>{const t=P("control",[n("inputAlign"),{error:ae.value,custom:!!r.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(r.input)return f("div",{class:t,onClick:O},[r.input()]);const c={id:ie(),ref:a,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:n("disabled"),readonly:n("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${d}-label`:void 0,onBlur:Y,onFocus:p,onInput:z,onClick:O,onChange:Le,onKeypress:ne,onCompositionend:Le,onCompositionstart:yt};return e.type==="textarea"?f("textarea",c,null):f("input",Ie(St(e.type),c),null)},l=()=>{const t=r["left-icon"];if(e.leftIcon||t)return f("div",{class:P("left-icon"),onClick:W},[t?t():f(ue,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},b=()=>{const t=r["right-icon"];if(e.rightIcon||t)return f("div",{class:P("right-icon"),onClick:ee},[t?t():f(ue,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},h=()=>{if(e.showWordLimit&&e.maxlength){const t=A(v());return f("div",{class:P("word-limit")},[f("span",{class:P("word-num")},[t]),tt("/"),e.maxlength])}},k=()=>{if(g&&g.props.showErrorMessage===!1)return;const t=e.errorMessage||i.validateMessage;if(t){const c=r["error-message"],u=n("errorMessageAlign");return f("div",{class:P("error-message",u)},[c?c({message:t}):t])}},E=()=>{const t=n("labelWidth"),c=n("labelAlign"),u=n("colon")?":":"";if(r.label)return[r.label(),u];if(e.label)return f("label",{id:`${d}-label`,for:r.input?void 0:ie(),onClick:m=>{ce(m),Z()},style:c==="top"&&t?{width:Q(t)}:void 0},[e.label+u])},q=()=>[f("div",{class:P("body")},[ye(),y.value&&f(ue,{ref:C,name:e.clearIcon,class:P("clear")},null),b(),r.button&&f("div",{class:P("button")},[r.button()])]),h(),k()];return Ce({blur:D,focus:Z,validate:$,formValue:x,resetValidation:M,getValidationStatus:be}),Ze(pe,{customValue:w,resetValidation:M,validateWithTrigger:_}),U(()=>e.modelValue,()=>{N(v()),M(),_("onChange"),F(H)}),ge(()=>{N(v(),e.formatTrigger),F(H)}),$e("touchstart",te,{target:I(()=>{var t;return(t=C.value)==null?void 0:t.$el})}),()=>{const t=n("disabled"),c=n("labelAlign"),u=l(),m=()=>{const S=E();return c==="top"?[u,S].filter(Boolean):S||[]};return f(st,{size:e.size,class:P({error:ae.value,disabled:t,[`label-${c}`]:c}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:me.value,valueClass:P("value"),titleClass:[P("label",[c,{required:L.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:u&&c!=="top"?()=>u:null,title:m,value:q,extra:r.extra})}}});const Rt=ve(Et),[kt,X]=de("image"),Tt={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:R,height:R,radius:R,lazyLoad:Boolean,iconSize:R,showError:J,errorIcon:G("photo-fail"),iconPrefix:String,showLoading:J,loadingIcon:G("photo"),crossorigin:String,referrerpolicy:String};var Pt=fe({name:kt,props:Tt,emits:["load","error"],setup(e,{emit:o,slots:r}){const d=j(!1),i=j(!0),a=j(),{$Lazyload:C}=Me().proxy,w=I(()=>{const s={width:Q(e.width),height:Q(e.height)};return K(e.radius)&&(s.overflow="hidden",s.borderRadius=Q(e.radius)),s});U(()=>e.src,()=>{d.value=!1,i.value=!0});const g=s=>{i.value&&(i.value=!1,o("load",s))},v=()=>{const s=new Event("load");Object.defineProperty(s,"target",{value:a.value,enumerable:!0}),g(s)},n=s=>{d.value=!0,i.value=!1,o("error",s)},y=(s,$,_)=>_?_():f(ue,{name:s,size:e.iconSize,class:$,classPrefix:e.iconPrefix},null),x=()=>{if(i.value&&e.showLoading)return f("div",{class:X("loading")},[y(e.loadingIcon,X("loading-icon"),r.loading)]);if(d.value&&e.showError)return f("div",{class:X("error")},[y(e.errorIcon,X("error-icon"),r.error)])},L=()=>{if(d.value||!e.src)return;const s={alt:e.alt,class:X("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?it(f("img",Ie({ref:a},s),null),[[lt("lazy"),e.src]]):f("img",Ie({ref:a,src:e.src,onLoad:g,onError:n},s),null)},B=({el:s})=>{const $=()=>{s===a.value&&i.value&&v()};a.value?$():F($)},M=({el:s})=>{s===a.value&&!d.value&&n()};return C&&nt&&(C.$on("loaded",B),C.$on("error",M),Ve(()=>{C.$off("loaded",B),C.$off("error",M)})),ge(()=>{F(()=>{var s;(s=a.value)!=null&&s.complete&&!e.lazyLoad&&v()})}),()=>{var s;return f("div",{class:X({round:e.round,block:e.block}),style:w.value},[L(),x(),(s=r.default)==null?void 0:s.call(r)])}}});const Bt=ve(Pt);function _t(){return Ae({url:"/home/index",method:"get"})}function Dt(e){return Ae({url:"/home/detail",method:"get",params:e})}export{Rt as F,Bt as I,zt as S,At as a,Dt as b,xt as f,_t as g,ut as u};
