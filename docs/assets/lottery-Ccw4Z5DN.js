import{d as I,H as $,f as j,r as d,ap as B,c as r,b as e,u as o,E as u,a as _,g as L,ao as b,F as R,C as z,e as N,i as P,aq as S,D as T,o as a,k as V,w as G,G as h}from"./index-NBx_Pa6c.js";import{D as M}from"./index-tQ2BTn-G.js";import{g as A}from"./home-mrlryKVM.js";const E="/future-mall/assets/lucky-bg-xaD0IhYG.png",F="/future-mall/assets/lucky-point-CfmXvD_Z.png",O="/future-mall/assets/lucky-border-BiAP3rv2.png",q={"p-2":""},H={"rounded-lg":"","bg-white":"","p-3":""},U={"mb-8":"",flex:"","items-center":"","justify-between":""},X={flex:"","items-center":"","gap-x-3":""},Y=["src"],Z={"space-y-1":""},J={text:"sm black/80"},K=e("span",null,"积分明细",-1),Q=e("div",{"i-solar-alt-arrow-right-line-duotone":""},null,-1),W=[K,Q],ee=e("div",{"mb-5":""},[e("div",{text:"xs red","mb-2":""}," 可用积分 "),e("div",{bg:"#ffbc49","h-10px":"","rounded-full":""},[e("div",{style:{width:`${97.4/178.1*100}%`},relative:"","h-full":"","rounded-full":"","bg-red":""},[e("div",{top:"1/2","translate-y":"-1/2","translate-x":"1/2",absolute:"","right-0":"","box-border":"","h-20px":"","w-20px":"","rounded-full":"","bg-white":"","p-3px":""},[e("div",{"h-full":"","w-full":"","rounded-full":"","bg-red":""})]),e("div",{top:"[calc(-100%-25px)]","translate-x":"1/2",text:"xs white",p:"x-2 y-1",absolute:"","right-0":"",rounded:"","bg-red":""}," 973753 "),e("div",{border:"5px solid transparent t-red","translate-x":"1/2",absolute:"","right-0":"","h-0":"","w-0":"",top:"[calc(-100%-1px)]"})])])],-1),te={grid:"~ cols-3"},se=e("div",{"mb-1":"",flex:"","items-center":"","gap-x-2":""},[e("div",{"h-8px":"","w-8px":"","rounded-full":"","bg-red":""}),e("div",{text:"base black/80","font-semibold":""}," 97.4万 ")],-1),oe=e("div",{text:"xs black/60"}," 可用积分 ",-1),ie=[se,oe],ne=e("div",{"mb-1":"",flex:"","items-center":"","gap-x-2":""},[e("div",{"h-8px":"","w-8px":"","rounded-full":"","bg-yellow":""}),e("div",{text:"base black/80","font-semibold":""}," 80.7万 ")],-1),le=e("div",{text:"xs black/60"}," 已用积分 ",-1),de=[ne,le],re=e("div",{"mb-1":"",flex:"","items-center":"","gap-x-2":""},[e("div",{"h-8px":"","w-8px":"","rounded-full":"","bg-green":""}),e("div",{text:"base black/80","font-semibold":""}," 178.1万 ")],-1),ae=e("div",{text:"xs black/60"}," 总积分 ",-1),ce=[re,ae],ue=e("div",{"my-3":"",text:"sm black/80"}," 每次抽奖消耗1积分，不限次数 ",-1),xe={flex:"","items-center":"","justify-center":"","rounded-lg":"","bg-white":"","p-3":""},pe={"mb-3":"",flex:"","items-center":"","gap-x-4":""},ve={grid:"~ cols-2","gap-2":""},_e=["onClick"],be={relative:"","overflow-hidden":"","rounded-lg":"","bg-white":""},he={"h-175px":"","w-full":"","object-cover":"",alt:""},me={p:"x-1 y-1"},fe={truncate:"",text:"sm black/80",m:"b-1"},ge={flex:"","items-center":"","gap-x-2":""},ke={text:"base red","space-x-1":""},ye=e("span",{"text-xs":""},"积分",-1),we={key:0,text:"black/40 xs","line-through":""},Ce=e("span",{"text-sm":""},"￥",-1),De={key:0,text:"xs white",p:"x-2 y-2px",absolute:"","left-0":"","top-0":"","rounded-br-lg":"","bg-red":""},Re=I({name:"IntegralLottery",__name:"lottery",setup(Ie){const i=N(),{userInfo:p}=$(j()),m=d([{padding:"22px",imgs:[{src:O,width:"100%",height:"100%"}]},{padding:"22px",imgs:[{src:E,width:"100%",rotate:!0}]}]),f=d([{title:"0"},{title:"1"},{title:"2"},{title:"3"}]),g=d([{radius:"45%",imgs:[{src:F,width:"100%",top:"-100%"}]}]),x=B();function k(){x.value.play(),setTimeout(()=>{x.value.stop(0)},3e3)}const v=d([]);async function y(){const n=P({message:"加载中...",forbidClick:!0,duration:0});try{const{code:t,data:l}=await A();t===200&&(v.value=l==null?void 0:l.popularRecommendations)}finally{n.close()}}y();const c=d(0);function w(n){i.push({name:"ProductDetail",params:{id:n}})}return(n,t)=>{const l=S("lucky-wheel"),C=M,D=T("lazy");return a(),r("div",q,[e("div",H,[e("div",U,[e("div",X,[e("img",{src:o(p).avatar,"h-42px":"","w-42px":"","rounded-full":"","object-cover":"",alt:"avatar"},null,8,Y),e("div",Z,[e("div",J,u(o(p).nickname),1),e("div",{flex:"","items-center":"",text:"xs black/60",onClick:t[0]||(t[0]=s=>o(i).push({name:"IntegralDetail"}))},W)])]),e("div",{text:"xs black/80","rounded-full":"",border:"~ solid black",p:"x-3 y-1",onClick:t[1]||(t[1]=s=>o(i).push({name:"IntegralOrder"}))}," 我的兑换 ")]),ee,e("div",te,[e("div",{flex:"~ col items-center justify-center",border:"0 r solid gray-100",onClick:t[2]||(t[2]=s=>o(i).push({name:"IntegralDetail"}))},ie),e("div",{flex:"~ col items-center justify-center",border:"0 r solid gray-100",onClick:t[3]||(t[3]=s=>o(i).push({name:"IntegralOrder"}))},de),e("div",{flex:"~ col items-center justify-center",onClick:t[4]||(t[4]=s=>o(i).push({name:"IntegralDetail"}))},ce)])]),ue,e("div",xe,[_(l,{ref_key:"MyLuckyRef",ref:x,width:"300px",height:"300px",prizes:o(f),blocks:o(m),buttons:o(g),onStart:k},null,8,["prizes","blocks","buttons"])]),_(C,null,{default:L(()=>[V(" 积分兑换 ")]),_:1}),e("div",null,[e("div",pe,[e("div",{text:"sm black/80",class:b({"!text-red !text-base font-semibold":o(c)===0}),"transition-all":"",onClick:t[5]||(t[5]=s=>c.value=0)}," 全部 ",2),e("div",{text:"sm black/80",class:b({"!text-red !text-base font-semibold":o(c)===1}),"transition-all":"",onClick:t[6]||(t[6]=s=>c.value=1)}," 积分兑换 ",2)]),e("div",ve,[(a(!0),r(R,null,z(o(v),s=>(a(),r("div",{key:s.id,onClick:$e=>w(s.id)},[e("div",be,[G(e("img",he,null,512),[[D,s.image]]),e("div",me,[e("div",fe,u(s.title),1),e("div",ge,[e("div",ke,[e("span",null,u(Number(s.price).toLocaleString()),1),ye]),s.originalPrice?(a(),r("div",we,[Ce,e("span",null,u(Number(s.originalPrice).toLocaleString()),1)])):h("",!0)])]),s.isItAMembershipPrice===1?(a(),r("div",De," 会员价 ")):h("",!0)])],8,_e))),128))])])])}}});export{Re as default};
