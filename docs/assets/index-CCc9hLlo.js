import{z as k,l as A,d as h,a5 as B,n as C,a as n,m as p,I as w,a6 as v,S as I,t as T,O as L,r as x,a4 as S,u as _,B as P,e as D,i as R,o as $}from"./index-Dp0FA1M5.js";import{T as E}from"./index-C-uPgoJn.js";import{C as z}from"./index-De6F4hPg.js";import{B as G}from"./index-Dfjqo_bb.js";import{R as N,a as O}from"./index-B4_PY4e5.js";import{s as j,C as q}from"./index-BFlRTicd.js";import"./index-CFEJyrG6.js";import{g as U}from"./address-DU0Asy9i.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H=k(j),[J,u]=A("address-item");var K=h({name:J,props:{address:B(Object),disabled:Boolean,switchable:Boolean,singleChoice:Boolean,defaultTagText:String,rightIcon:C("edit")},emits:["edit","click","select"],setup(a,{slots:l,emit:d}){const i=e=>{a.switchable&&d("select"),d("click",e)},m=()=>n(w,{name:a.rightIcon,class:u("edit"),onClick:e=>{e.stopPropagation(),d("edit"),d("click",e)}},null),c=()=>{if(l.tag)return l.tag(a.address);if(a.address.isDefault&&a.defaultTagText)return n(E,{type:"primary",round:!0,class:u("tag")},{default:()=>[a.defaultTagText]})},f=()=>{const{address:e,disabled:t,switchable:s,singleChoice:o}=a,r=[n("div",{class:u("name")},[`${e.name} ${e.tel}`,c()]),n("div",{class:u("address")},[e.address])];return s&&!t?o?n(N,{name:e.id,iconSize:18},{default:()=>[r]}):n(q,{name:e.id,iconSize:18},{default:()=>[r]}):r};return()=>{var e;const{disabled:t}=a;return n("div",{class:u({disabled:t}),onClick:i},[n(z,{border:!1,titleClass:u("title")},{title:f,"right-icon":m}),(e=l.bottom)==null?void 0:e.call(l,p({},a.address,{disabled:t}))])}}});const[M,b,Q]=A("address-list"),W={list:v(),modelValue:[...I,Array],switchable:T,disabledText:String,disabledList:v(),showAddButton:T,addButtonText:String,defaultTagText:String,rightIcon:C("edit")};var X=h({name:M,props:W,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(a,{slots:l,emit:d}){const i=L(()=>!Array.isArray(a.modelValue)),m=(e,t,s)=>{const o=()=>d(s?"editDisabled":"edit",e,t),r=g=>d("clickItem",e,t,{event:g}),y=()=>{if(d(s?"selectDisabled":"select",e,t),!s)if(i.value)d("update:modelValue",e.id);else{const g=a.modelValue;g.includes(e.id)?d("update:modelValue",g.filter(V=>V!==e.id)):d("update:modelValue",[...g,e.id])}};return n(K,{key:e.id,address:e,disabled:s,switchable:a.switchable,singleChoice:i.value,defaultTagText:a.defaultTagText,rightIcon:a.rightIcon,onEdit:o,onClick:r,onSelect:y},{bottom:l["item-bottom"],tag:l.tag})},c=(e,t)=>{if(e)return e.map((s,o)=>m(s,o,t))},f=()=>a.showAddButton?n("div",{class:[b("bottom"),"van-safe-area-bottom"]},[n(G,{round:!0,block:!0,type:"primary",text:a.addButtonText||Q("add"),class:b("add"),onClick:()=>d("add")},null)]):void 0;return()=>{var e,t;const s=c(a.list),o=c(a.disabledList,!0),r=a.disabledText&&n("div",{class:b("disabled-text")},[a.disabledText]);return n("div",{class:b()},[(e=l.top)==null?void 0:e.call(l),!i.value&&Array.isArray(a.modelValue)?n(H,{modelValue:a.modelValue},{default:()=>[s]}):n(O,{modelValue:a.modelValue},{default:()=>[s]}),r,o,(t=l.default)==null?void 0:t.call(l),f()])}}});const Y=k(X),Z=h({name:"AddressPage",__name:"index",setup(a){const l=D(),d=x(""),i=x([]);async function m(){const e=R({message:"加载中...",duration:0});try{const{code:t,data:s}=await U();t===200&&(i.value=s,d.value=s[0].id)}finally{e.close()}}m();function c(){l.push({name:"AddressAdd",params:{type:"add"}})}function f(e){l.push({name:"AddressAdd",params:{type:"edit",id:e==null?void 0:e.id}})}return(e,t)=>{const s=Y;return $(),S(s,{modelValue:_(d),"onUpdate:modelValue":t[0]||(t[0]=o=>P(d)?d.value=o:null),list:_(i),"default-tag-text":"默认",onAdd:c,onEdit:f},null,8,["modelValue","list"])}}}),re=F(Z,[["__scopeId","data-v-5e81e0af"]]);export{re as default};
