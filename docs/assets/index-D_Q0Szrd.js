import{y as A,k as _,d as h,a6 as B,m as C,a as n,l as w,I,ae as v,U as L,t as T,K as p,r as k,a5 as S,b as x,A as P,g as D,h as R,o as $,aW as E}from"./index-DMlscLwg.js";import{T as z}from"./index-C9mea0MK.js";import{C as G}from"./index-Dc3sGD_2.js";import{B as N}from"./index-CIQG8yCD.js";import{a as U,R as j}from"./index-DwEn3Ydi.js";import{s as q,C as K}from"./index-CQy-SRei.js";import"./index-mnNxCDPg.js";import{g as O}from"./address-DTcVYhM8.js";const W=A(q),[F,u]=_("address-item");var H=h({name:F,props:{address:B(Object),disabled:Boolean,switchable:Boolean,singleChoice:Boolean,defaultTagText:String,rightIcon:C("edit")},emits:["edit","click","select"],setup(a,{slots:l,emit:d}){const i=e=>{a.switchable&&d("select"),d("click",e)},m=()=>n(I,{name:a.rightIcon,class:u("edit"),onClick:e=>{e.stopPropagation(),d("edit"),d("click",e)}},null),c=()=>{if(l.tag)return l.tag(a.address);if(a.address.isDefault&&a.defaultTagText)return n(z,{type:"primary",round:!0,class:u("tag")},{default:()=>[a.defaultTagText]})},f=()=>{const{address:e,disabled:t,switchable:s,singleChoice:o}=a,r=[n("div",{class:u("name")},[`${e.name} ${e.tel}`,c()]),n("div",{class:u("address")},[e.address])];return s&&!t?o?n(U,{name:e.id,iconSize:18},{default:()=>[r]}):n(K,{name:e.id,iconSize:18},{default:()=>[r]}):r};return()=>{var e;const{disabled:t}=a;return n("div",{class:u({disabled:t}),onClick:i},[n(G,{border:!1,titleClass:u("title")},{title:f,"right-icon":m}),(e=l.bottom)==null?void 0:e.call(l,w({},a.address,{disabled:t}))])}}});const[J,b,M]=_("address-list"),Q={list:v(),modelValue:[...L,Array],switchable:T,disabledText:String,disabledList:v(),showAddButton:T,addButtonText:String,defaultTagText:String,rightIcon:C("edit")};var X=h({name:J,props:Q,emits:["add","edit","select","clickItem","editDisabled","selectDisabled","update:modelValue"],setup(a,{slots:l,emit:d}){const i=p(()=>!Array.isArray(a.modelValue)),m=(e,t,s)=>{const o=()=>d(s?"editDisabled":"edit",e,t),r=g=>d("clickItem",e,t,{event:g}),y=()=>{if(d(s?"selectDisabled":"select",e,t),!s)if(i.value)d("update:modelValue",e.id);else{const g=a.modelValue;g.includes(e.id)?d("update:modelValue",g.filter(V=>V!==e.id)):d("update:modelValue",[...g,e.id])}};return n(H,{key:e.id,address:e,disabled:s,switchable:a.switchable,singleChoice:i.value,defaultTagText:a.defaultTagText,rightIcon:a.rightIcon,onEdit:o,onClick:r,onSelect:y},{bottom:l["item-bottom"],tag:l.tag})},c=(e,t)=>{if(e)return e.map((s,o)=>m(s,o,t))},f=()=>a.showAddButton?n("div",{class:[b("bottom"),"van-safe-area-bottom"]},[n(N,{round:!0,block:!0,type:"primary",text:a.addButtonText||M("add"),class:b("add"),onClick:()=>d("add")},null)]):void 0;return()=>{var e,t;const s=c(a.list),o=c(a.disabledList,!0),r=a.disabledText&&n("div",{class:b("disabled-text")},[a.disabledText]);return n("div",{class:b()},[(e=l.top)==null?void 0:e.call(l),!i.value&&Array.isArray(a.modelValue)?n(W,{modelValue:a.modelValue},{default:()=>[s]}):n(j,{modelValue:a.modelValue},{default:()=>[s]}),r,o,(t=l.default)==null?void 0:t.call(l),f()])}}});const Y=A(X),Z=h({name:"AddressPage",__name:"index",setup(a){const l=D(),d=k(""),i=k([]);async function m(){const e=R({message:"加载中...",duration:0});try{const{code:t,data:s}=await O();t===200&&(i.value=s,d.value=s[0].id)}finally{e.close()}}m();function c(){l.push({name:"AddressAdd",params:{type:"add"}})}function f(e){l.push({name:"AddressAdd",params:{type:"edit",id:e==null?void 0:e.id}})}return(e,t)=>{const s=Y;return $(),S(s,{modelValue:x(d),"onUpdate:modelValue":t[0]||(t[0]=o=>P(d)?d.value=o:null),list:x(i),"default-tag-text":"默认",onAdd:c,onEdit:f},null,8,["modelValue","list"])}}}),ie=E(Z,[["__scopeId","data-v-5e81e0af"]]);export{ie as default};
